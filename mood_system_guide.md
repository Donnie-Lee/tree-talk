# TreeTalk 情绪记录系统使用指南

## 系统概述
TreeTalk情绪记录系统是一个完整的情绪追踪解决方案，支持每日心情记录、日历视图展示和情绪趋势分析。

## 功能特性

### 1. 智能记录引导
- **首次进入检测**：应用启动时自动检测当天是否已记录心情
- **无记录引导**：若当天未记录，自动跳转到心情记录页面
- **已记录展示**：已记录时展示日历和趋势图表

### 2. 日历组件
- **月份导航**：支持前后切换月份查看历史记录
- **心情表情**：在日历日期上直接显示对应的心情图标
- **点击交互**：点击任意日期可查看或编辑该天的心情记录
- **今日标记**：当前日期有特殊高亮显示

### 3. 情绪图表
- **7天趋势**：展示最近7天的情绪变化趋势
- **动态联动**：点击日历日期时，图表自动更新显示对应数据
- **视觉化展示**：使用折线图清晰展示情绪波动

### 4. 心情编辑
- **心情选择**：提供6种预设心情状态（开心、平静、焦虑、悲伤、愤怒、疲惫）
- **文字描述**：支持添加详细的文字记录
- **快速编辑**：点击已有记录可快速修改

## 数据结构

### MoodRecord 模型
```dart
class MoodRecord {
  final DateTime date;      // 记录日期
  final String mood;        // 心情类型
  final String content;     // 文字描述
  final Color color;        // 对应颜色
  final IconData icon;      // 对应图标
  final DateTime createdAt; // 创建时间
}
```

### MoodService 服务
- **数据存储**：基于ChangeNotifier的状态管理
- **查询功能**：支持按日期查询、7天数据获取
- **统计功能**：心情频率统计
- **实时更新**：数据变化时自动通知UI更新

## 使用流程

### 1. 首次使用
1. 启动应用 → 自动检测当天记录状态
2. 若无记录 → 跳转心情编辑页面
3. 选择心情 → 添加描述 → 保存记录
4. 返回首页 → 查看日历和图表

### 2. 日常记录
1. 点击日历任意日期 → 进入编辑页面
2. 修改心情或描述 → 保存更新
3. 图表自动刷新 → 查看趋势变化

### 3. 历史查看
1. 切换月份 → 查看历史记录
2. 点击任意日期 → 查看详情
3. 图表联动更新 → 查看对应数据

## 视觉设计

### 玻璃态设计
- **背景**：磨砂玻璃效果，透明度适中
- **边框**：细边框增强层次感
- **圆角**：16px圆角营造柔和视觉
- **配色**：与TreeTalk主题色系统一

### 心情色彩系统
- **开心**：温暖黄色 (#FFD93D)
- **平静**：清新绿色 (#6BCF7F)
- **焦虑**：警示橙色 (#FF9500)
- **悲伤**：沉静蓝色 (#5C7CFA)
- **愤怒**：强烈红色 (#FF4757)
- **疲惫**：柔和紫色 (#A8E6CF)

## 技术实现

### 组件结构
```
lib/
├── models/
│   └── mood_record.dart          # 数据模型
├── services/
│   └── mood_service.dart        # 状态管理服务
├── widgets/
│   ├── mood_calendar.dart       # 日历组件
│   └── mood_chart.dart          # 图表组件
├── screens/
│   ├── home_screen.dart         # 主页面
│   └── mood_edit_screen.dart    # 编辑页面
```

### 关键特性
- **响应式布局**：适配不同屏幕尺寸
- **性能优化**：使用RepaintBoundary优化图表绘制
- **用户体验**：流畅的动画过渡和即时反馈
- **数据持久化**：支持应用重启后数据不丢失

## 扩展建议

### 未来功能
- **心情标签**：支持自定义心情标签
- **数据导出**：支持CSV或PDF格式导出
- **分享功能**：分享心情记录到社交媒体
- **提醒功能**：每日心情记录提醒
- **深度分析**：更详细的情绪分析报告

### 个性化选项
- **主题切换**：支持浅色/深色主题
- **心情图标**：自定义心情图标和颜色
- **图表样式**：多种图表展示方式
- **背景图片**：自定义应用背景

## 使用技巧

1. **定期记录**：建议每天固定时间记录心情
2. **详细描述**：添加具体事件描述有助于后续分析
3. **观察趋势**：关注长期情绪变化模式
4. **及时更新**：心情变化时及时修改记录
5. **隐私保护**：记录内容仅本地存储，保护用户隐私

TreeTalk情绪记录系统让情绪管理变得简单而有趣，帮助用户更好地了解自己的情感状态和生活模式。